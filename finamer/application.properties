# ===============================================
# COMMON DLQ CONFIGURATION - TODOS LOS MICROSERVICIOS
# ===============================================

# DLQ Database (centralizado)
spring.datasource.dlq.url=jdbc:postgresql://${INTERNAL_IP}:5432/kafka_dlq
spring.datasource.dlq.username=${DLQ_DB_USERNAME:dlq_user}
spring.datasource.dlq.password=${DLQ_DB_PASSWORD}
spring.datasource.dlq.driver-class-name=org.postgresql.Driver

# Hikari Pool para DLQ
spring.datasource.dlq.hikari.maximum-pool-size=10
spring.datasource.dlq.hikari.minimum-idle=2
spring.datasource.dlq.hikari.connection-timeout=20000
spring.datasource.dlq.hikari.idle-timeout=600000
spring.datasource.dlq.hikari.max-lifetime=1800000
spring.datasource.dlq.hikari.pool-name=DLQHikariPool

# DLQ Configuration
finamer.kafka.dlq.enabled=true
finamer.kafka.dlq.suffix=.DLT
finamer.kafka.dlq.max-retries=3
finamer.kafka.dlq.retry-delay=1s
finamer.kafka.dlq.auto-create-topics=true
finamer.kafka.dlq.enable-batch-reprocessing=true

# Redis (idempotencia)
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# Flyway (deshabilitado - la lib lo maneja)
spring.flyway.enabled=false

# Idempotency com√∫n
finamer.kafka.idempotency.enabled=true
finamer.kafka.idempotency.ttl=24h
