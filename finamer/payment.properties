# ===============================================
# PAYMENT MICROSERVICE - SPECIFIC CONFIGURATION
# ===============================================

# ===============================================
# SERVER
# ===============================================
server.port=${PAYMENT_SERVER_PORT}

# ===============================================
# SPRING
# ===============================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
spring.codec.max-in-memory-size=50MB

# ===============================================
# DATABASE (Write - Custom Hikari Pool)
# ===============================================
spring.datasource.url=${PAYMENT_DB_HOST_RW}
spring.datasource.username=${PAYMENT_DB_USER_RW}
spring.datasource.password=${PAYMENT_DB_PASSWORD_RW}
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=3
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.leak-detection-threshold=20000

# ===============================================
# DATABASE (Read - Custom Hikari Pool)
# ===============================================
spring.read-datasource.url=${PAYMENT_DB_HOST_R}
spring.read-datasource.username=${PAYMENT_DB_USER_R}
spring.read-datasource.password=${PAYMENT_DB_PASSWORD_R}
spring.read-datasource.hikari.maximum-pool-size=10
spring.read-datasource.hikari.minimum-idle=3
spring.read-datasource.hikari.idle-timeout=30000
spring.read-datasource.hikari.connection-timeout=30000
spring.read-datasource.hikari.leak-detection-threshold=20000

# ===============================================
# KAFKA
# ===============================================
KAFKA_GROUP_ID=${PAYMENT_KAFKA_GROUP_ID}

finamer.kafka.default-topic=payments-default
finamer.kafka.consumer.group-id=${PAYMENT_KAFKA_GROUP_ID}
finamer.kafka.idempotency.key-prefix=finamer:payments:processed:
finamer.kafka.metrics.prefix=finamer.kafka.payments
finamer.kafka.metrics.default-tags.service=finamer-payments
finamer.kafka.message-types.strict-validation=${KAFKA_STRICT_VALIDATION:false}
finamer.kafka.message-types.auto-register-defaults=true

# ===============================================
# MINIO
# ===============================================
minio.bucketName=${PAYMENT_MINIO_BUCKET_NAME}

# ===============================================
# PAYMENT APPLICATION CONFIGURATIONS
# ===============================================
payment.source.expense.code=${PAYMENT_SOURCE_EXP_CODE:EXP}
payment.source.bank.code=${PAYMENT_SOURCE_BANK_CODE:BK}
payment.status.confirm.code=${PAYMENT_STATUS_CONF_CODE:CON}
payment.source.apply.code=${PAYMENT_SOURCE_APPLY_CODE:APL}
payment.attachment.status.code=${PAYMENT_ATTACHMENT_STATUS_CODE:OTHER}
payment.resource.type.code=${PAYMENT_SOURCE_TYPE_CODE:PAY}
payment.attachment.type.code=${PAYMENT_ATTACHMENT_TYPE_CODE:PYD}
payment.default.attachment.status.code=${PAYMENT_DEFAULT_ATTACHMENT_STATUS_CODE:NON}
payment.relate.invoice.status.code=${PAYMENT_RELATED_INCOME_STATUS_CODE:SENT}
report.payment-all-support-code=${ALL_SUPPORT_CODE:PAY}

# ===============================================
# INTERNAL ENDPOINTS
# ===============================================
payment.file.service.url=${PAYMENT_FILE_SERVICE_URL}
report.service.url=${REPORT_SERVICE}
report.invoice.service=${REPORT_SERVICE}
setting.service.url=${SETTINGS_SERVICE}
booking.invoice.service=${INVOICING_SERVICE}

# Internal Path Endpoints
antitoincone.invoice.service=/api/income/anti-to-income

# ===============================================
# FTP CONFIGURATION
# ===============================================
ftp.api.url=${MAIL_API_URL}
upload.location=/tmp/upload
ftp.server.address=${FTP_SERVER}
ftp.server.port=${FTP_PORT}
ftp.username=${FTP_USERNAME}
ftp.password=${FTP_PASSWORD}
ftp.base.path=${FTP_BASE_PATH}

# ===============================================
# REPORT CODES
# ===============================================
report.code.payment.details=aaa
report.code.invoice.booking=inv

# ===============================================
# SECURITY CONFIGURATION
# ===============================================
kynsoft.security.microservice.enabled=false
kynsoft.security.webclient.enabled=true

kynsoft.security.webclient.retry.max-attempts=3
kynsoft.security.webclient.retry.backoff-delay-ms=1000
kynsoft.security.webclient.retry.enabled=true
kynsoft.security.webclient.timeout.connection-timeout-ms=5000
kynsoft.security.webclient.timeout.response-timeout-ms=30000
kynsoft.security.webclient.timeout.read-timeout-ms=30000
